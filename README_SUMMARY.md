# 外卖评论方面级情感分析框架实现总结

## 项目概述

我们实现了一个用于中文外卖评论的方面级情感分析框架，该框架结合了领域自适应预训练、k-means++种子集选择、主动学习循环和基于MLM的无监督数据增强(UDA-MLM)四个主要组件。

## 实现细节

### 1. 数据处理与工具

- 设计了数据加载、预处理和转换工具
- 实现了适用于预训练和情感分析的特定数据集类
- 定义了方面类别映射和情感极性映射

### 2. 领域自适应BERT预训练

- 基于HuggingFace的BERT实现了MLM预训练
- 支持在外卖评论领域数据上进行继续预训练
- 使用TensorBoard进行训练监控与可视化

### 3. k-means++种子集选择

- 使用BERT提取文本嵌入向量
- 实现k-means++聚类选择最具代表性的样本
- 提供种子集保存和加载功能

### 4. 主动学习循环

- 实现不确定性采样器，用于选择高不确定性样本
- 结合多样性考虑，平衡代表性与信息量
- 通过迭代训练-评估-选择流程优化模型性能

### 5. 无监督数据增强(UDA-MLM)

- 基于MLM进行样本增强，生成语义相似但表达不同的样本
- 保护方面词，避免增强破坏关键信息
- 实现一致性正则化，提高模型泛化能力

### 6. 方面级情感分析模型

- 实现了基础和增强版两种模型架构
- 基础版：直接使用BERT的[CLS]表示进行多标签分类
- 增强版：为每个方面使用专门的注意力机制和分类器

### 7. 模型训练器

- 支持标准和一致性损失的训练模式
- 提供灵活的优化器和学习率调度配置
- 支持早停和最佳模型保存

### 8. 完整流水线

- 配置驱动的端到端实现
- 支持各个阶段的跳过，方便调试和实验
- 提供了完整的命令行界面

## 创新点

1. **多组件集成**：将预训练、主动学习和数据增强有机结合
2. **特定领域适应**：专门针对外卖评论优化的框架
3. **不确定性与多样性平衡**：在主动学习中同时考虑不确定性和多样性
4. **方面词保护机制**：在数据增强过程中避免改变方面词

## 使用方法

运行完整流水线：
```bash
python scripts/run_pipeline.py --config configs/pipeline.yaml
```

跳过特定组件：
```bash
python scripts/run_pipeline.py --config configs/pipeline.yaml --skip_pretraining
```

## 未来改进方向

1. 添加图神经网络来捕捉方面之间的关系
2. 引入多模态输入支持图像和文本联合分析
3. 实现增量学习机制，支持不断更新的数据流
4. 添加多语言支持，扩展到其他语言的评论分析 